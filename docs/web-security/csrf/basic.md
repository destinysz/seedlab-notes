#
#### 定义&原理
HTTP是一种无状态的协议。即服务器不会保留于客户端交互时的状态(比如用户在网站一个页面已完成登陆，当该网站的另一个页面需要验证用户登陆的时候仍然需要用户再次登陆)  

为了让服务器能够记住用户，所以引入了Cookie机制。  
当用户访问站点的时候，站点会为该用户分配一个Cookie，当用户浏览器接受到包含Cookie的数据包后会将Cookie的值取出存放的浏览器中，随后浏览器会在发往该站点的数据包中自动填充该Cookie值(**这个填充是浏览器的行为**)  



跨站请求伪造(CSRF)是一种恶意攻击，当普通用户访问恶意网页时，该网页可以代替用户向目标网站发送伪造的请求。如果服务器对两者一视同仁，那么第三方网站就完全可以伪造的和同站请求一样。  

![](/web-security/img/csrf-1.png)

服务器无法通过cookie来判断客户端的请求是否可信。比如上图网站B的页面请求网站A的时候浏览器会带着网站A的cookie(前提时用户没于退出网站A的登陆)。这样A就不知道是用户自己请求的还是B请求的  


#### 伪造攻击
csrf攻击包括三部分: 目标用户(受害者)、目标网站和攻击者操纵的恶意网站。  
攻击者让一个目标用户访问他们的恶意页面，攻击者的恶意网页就能从目标用户的电脑上发送一个伪造请求。  

